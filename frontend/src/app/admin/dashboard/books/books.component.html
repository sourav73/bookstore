<div class="container">
  <h3 class="text-center text-primary text-decoration-underline mb-4">Books</h3>
  <div class="container-fluid d-flex justify-content-between mb-3 p-0">
    <div class="filter d-flex gap-3">
      <!-- categories -->
      <select
        #category
        class="form-select"
        (input)="onFilter(category.value, author.value)"
      >
        <option value="">Select Category</option>
        <option
          *ngFor="let category of categories | async"
          [value]="category.name"
        >
          {{ category.name }}
        </option>
      </select>
      <!-- Authors -->
      <select
        #author
        class="form-select"
        (input)="onFilter(category.value, author.value)"
      >
        <option value="">Select Author</option>
        <option *ngFor="let author of authors | async" [value]="author.name">
          {{ author.name }}
        </option>
      </select>
    </div>
    <div class="adding">
      <button
        class="btn btn-success"
        data-bs-toggle="modal"
        data-bs-target="#editBookModal"
      >
        Add Book
      </button>
    </div>
  </div>
  <div class="book-list">
    <p *ngIf="isLoading">Fetching data...</p>
    <div
      class="book-card mb-3 gap-3 d-flex align-items-center"
      *ngFor="let book of filteredBooks | async"
      style="border: 1px solid"
    >
      <div class="book-image">
        <img
          src="https://www.mswordcoverpages.com/wp-content/uploads/2018/10/Book-cover-page-7-CRC.png"
          alt="book"
          class="w-100"
        />
      </div>
      <div class="book-info flex-grow-1">
        <h3>{{ book.name }}</h3>
        <small>Author: {{ book.author.name }}</small
        ><br />
        <small>Category: {{ book.category.name }}</small>
      </div>
      <div class="book-action">
        <button
          class="btn btn-warning text-white"
          data-bs-toggle="modal"
          data-bs-target="#editBookModal"
        >
          Edit
        </button>
        <button class="btn btn-danger ms-3">Delete</button>
      </div>
    </div>
  </div>
  <!-- Edit modal -->
  <div
    class="modal fade"
    id="editBookModal"
    tabindex="-1"
    aria-labelledby="editBookModal"
    aria-hidden="true"
  >
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="editBookModal">Edit Book</h1>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>
        <div class="modal-body">
          <form [formGroup]="editForm">
            <div class="form-group">
              <label for="">Book Name</label>
              <input
                type="text"
                class="form-control"
                placeholder="Enter book name"
              />
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
